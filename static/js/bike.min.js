function circleOnMap(e,t){try{for(m of e)0!=m.SBIKE_PARKING_CNT?(L.marker([m.SBIKE_X,m.SBIKE_Y],{icon:L.icon({iconUrl:"../../static/images/ui/marker_bicycle.png",iconSize:[30,36],iconAnchor:[22,15],popupAnchor:[-7,2]})}).bindPopup(`<strong>${m.SBIKE_SPOT_NM}</strong><br><br><div class="bike-count-bubble">${m.SBIKE_PARKING_CNT}${translateBike(PageLocale)}</div>`).addTo(t),L.marker([m.SBIKE_X,m.SBIKE_Y],{icon:L.divIcon({html:`<div class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">${m.SBIKE_PARKING_CNT}</div>`,iconSize:[0,0],iconAnchor:[-10,12]})}).addTo(t)):(L.marker([m.SBIKE_X,m.SBIKE_Y],{icon:L.icon({iconUrl:"../../static/images/ui/marker_no_bicycle.png",iconSize:[30,36],iconAnchor:[22,15],popupAnchor:[-7,2]})}).bindPopup(`<strong>${m.SBIKE_SPOT_NM}</strong><br><br><div class="bike-count-bubble">${m.SBIKE_PARKING_CNT}${translateBike(PageLocale)}</div>`).addTo(t),L.marker([m.SBIKE_X,m.SBIKE_Y],{icon:L.divIcon({html:`<div class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary">${m.SBIKE_PARKING_CNT}</div>`,iconSize:[0,0],iconAnchor:[-10,12]})}).addTo(t))}catch{return void console.log("서버 데이터 확인 필요")}}const PageLocale=userLocale();document.addEventListener("DOMContentLoaded",async()=>{try{const e=new URL(window.location.href),t=e.pathname.split("/")[3],n=await fetch(`/${PageLocale}/bike/${t}`),o=await n.json(),i=await o.SBIKE_STTS,a=i[0].SBIKE_X,c=i[0].SBIKE_Y,r=document.querySelector(".bike-list");for(bike of i){const e=document.createElement("li"),t=document.createElement("span");t.textContent=bike.SBIKE_SPOT_NM,t.classList.add("bike-station-name");const n=document.createElement("span");n.textContent=bike.SBIKE_PARKING_CNT,n.classList.add("bike-count-list"),"0"==bike.SBIKE_PARKING_CNT&&n.classList.add("bike-zero"),e.appendChild(n),e.appendChild(t),r.appendChild(e)}let d=L.map("map",{center:[a,c],zoom:16});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(d),circleOnMap(i,d);const s=document.getElementById("total-bikes");if(s&&Array.isArray(i)&&i.length>0){const e=i.reduce((e,t)=>e+(parseInt(t.SBIKE_PARKING_CNT,10)||0),0),t=s.innerText.replace("--counts--",e);s.textContent=t}else{const e=s.innerText.replace("--counts--",0);s.textContent=e}}catch{const e=document.createElement("div");e.textContent="No bike available",e.classList.add("no-bike"),document.getElementById("map").appendChild(e)}});