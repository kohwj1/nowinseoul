function circleOnMap(e,o){try{for(m of e)0!=m.SBIKE_PARKING_CNT?(L.marker([m.SBIKE_X,m.SBIKE_Y],{icon:L.icon({iconUrl:"../../static/images/ui/marker_bicycle.png",iconSize:[30,36],iconAnchor:[22,15],popupAnchor:[-7,2]})}).bindPopup(`<strong>${m.SBIKE_SPOT_NM}</strong><br><br><div class="bike-count-bubble">${m.SBIKE_PARKING_CNT}${translateBike(PageLocale)}</div>`).addTo(o),L.marker([m.SBIKE_X,m.SBIKE_Y],{icon:L.divIcon({html:`<div class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">${m.SBIKE_PARKING_CNT}</div>`,iconSize:[0,0],iconAnchor:[-10,12]})}).addTo(o)):(L.marker([m.SBIKE_X,m.SBIKE_Y],{icon:L.icon({iconUrl:"../../static/images/ui/marker_no_bicycle.png",iconSize:[30,36],iconAnchor:[22,15],popupAnchor:[-7,2]})}).bindPopup(`<strong>${m.SBIKE_SPOT_NM}</strong><br><br><div class="bike-count-bubble">${m.SBIKE_PARKING_CNT}${translateBike(PageLocale)}</div>`).addTo(o),L.marker([m.SBIKE_X,m.SBIKE_Y],{icon:L.divIcon({html:`<div class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary">${m.SBIKE_PARKING_CNT}</div>`,iconSize:[0,0],iconAnchor:[-10,12]})}).addTo(o))}catch{return void console.log("서버 데이터 확인 필요")}}const PageLocale=userLocale();document.addEventListener("DOMContentLoaded",async()=>{try{const e=new URL(window.location.href),o=e.pathname.split("/")[3],t=await fetch(`/${PageLocale}/bike/${o}`),n=await t.json(),a=await n.SBIKE_STTS,i=a[0].SBIKE_X,c=a[0].SBIKE_Y;console.log(i,c);let r=L.map("map",{center:[i,c],zoom:16});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(r),circleOnMap(a,r);const s=document.getElementById("total-bikes");if(s&&Array.isArray(a)&&a.length>0){const e=a.reduce((e,o)=>e+(parseInt(o.SBIKE_PARKING_CNT,10)||0),0),o=s.innerText.replace("--counts--",e);s.textContent=o}else{const e=s.innerText.replace("--counts--",0);s.textContent=e}}catch{const e=document.createElement("div");e.textContent="No bike available",e.classList.add("no-bike"),document.getElementById("map").appendChild(e)}});