function customMarker(e){const a={Comfortable:"../static/images/ui/marker_0.png",Moderate:"../static/images/ui/marker_1.png","Slightly crowded":"../static/images/ui/marker_2.png",Crowded:"../static/images/ui/marker_3.png"},o=L.icon({iconUrl:a[e],iconSize:[30,36],iconAnchor:[22,15],popupAnchor:[-7,2]});return o}function heatLevel(e){const a={Comfortable:.25,Moderate:.5,"Slightly crowded":.75,Crowded:1};return a[e]}function clearMap(){map.eachLayer(function(e){(e instanceof L.Marker||e instanceof L.HeatLayer)&&map.removeLayer(e)})}function markOnMap(e){for(m of e)L.marker([m.lat,m.lng],{icon:customMarker(m.crowd)}).bindPopup(`<strong>${m.name}</strong><br>${translateCrowd(userLocale(),m.crowd)}<br><br><a class="gotoDetail" href="detail/${m.id}">&gt;&gt; ${translateCrowd(userLocale(),"Go to Detail")}</a>`).addTo(map)}function heatOnMap(e){let a=[];for(m of e)a.push([m.lat,m.lng,heatLevel(m.crowd)]);L.heatLayer(a,{radius:100,blur:32,maxZoom:16,gradient:{.25:"#ffff00",.5:"#ff6600",.75:"#ff6600",1:"#ff0000"}}).addTo(map)}function openTooltip(){map.eachLayer(function(e){if(e instanceof L.Marker)return map.setView(e.getLatLng()),void e.openPopup()})}let map=L.map("map",{center:[37.5389,126.978],zoom:11});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:"&copy; OpenStreetMap contributors"}).addTo(map);