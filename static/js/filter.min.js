function getFilterArgs(){const e=document.getElementById("mapSearch").value,t=Array.from(document.querySelectorAll('input[name="theme"]:checked')).map(e=>e.value),a=document.querySelector('input[name="crowd"]:checked').value;return{keyword:e,theme:t,crowd:a}}function placeFilter(e,t,a){let l=originMapData;return""!==e&&(l=l.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))),t.includes("food")&&(l=l.filter(e=>null!=e.food&&0!=e.food)),t.includes("drama")&&(l=l.filter(e=>null!=e.drama&&0!=e.drama)),t.includes("movie")&&(l=l.filter(e=>null!=e.movie&&0!=e.movie)),t.includes("beauty")&&(l=l.filter(e=>null!=e.beauty&&0!=e.beauty)),"all"!==a&&(l=l.filter(e=>e.crowd==a)),l}function searchPlace(){const e=getFilterArgs(),t=placeFilter(e.keyword,e.theme,e.crowd);clearMap(),t.length>0?(markOnMap(t),heatOnMap(t),openTooltip(),toggleFilter()):toastPop(translateToast(userLocale(),"No Search Result"))}function toggleFilter(){window.innerWidth<=1e3&&(filterUI.style.bottom=isFilterDisplayed?36+-1*filterBody.offsetHeight+"px":"36px",filterUI.classList.toggle("move-up"),filterDisplayBtn.classList.toggle("collapsed"),isFilterDisplayed=!isFilterDisplayed)}function toastPop(e){document.getElementById("toastMsg").textContent=e;const t=bootstrap.Toast.getOrCreateInstance(document.getElementById("toast"));t.show()}const filter_items=document.querySelectorAll(".mapfilter");for(i of filter_items)i.addEventListener("click",()=>{const e=getFilterArgs(),t=placeFilter(e.keyword,e.theme,e.crowd);clearMap(),markOnMap(t),heatOnMap(t)});let isFilterDisplayed=!1;const filterDisplayBtn=document.getElementById("filterDisplay"),mapCanvas=document.getElementById("map"),filterUI=document.getElementById("mapFilter"),filterDiv=document.getElementById("filterDiv"),filterBody=document.querySelector("#filterDiv .accordion-body");filterDisplayBtn.addEventListener("click",toggleFilter),document.addEventListener("DOMContentLoaded",()=>{window.innerWidth<=1e3?filterUI.style.bottom=36+-1*filterBody.offsetHeight+"px":document.getElementById("toast").classList.remove("start-50"),clearMap(),markOnMap(originMapData),heatOnMap(originMapData)}),window.addEventListener("resize",()=>{window.innerWidth<=1e3?document.getElementById("toast").classList.add("start-50"):document.getElementById("toast").classList.remove("start-50")}),document.getElementById("btnReset").addEventListener("click",()=>{clearMap(),markOnMap(originMapData),heatOnMap(originMapData)}),document.getElementById("btnSearch").addEventListener("click",()=>{const e=document.getElementById("mapSearch").value;""==e?toastPop(translateToast(userLocale(),"Please enter a keyword")):searchPlace()}),document.getElementById("filterForm").addEventListener("submit",e=>{e.preventDefault()});