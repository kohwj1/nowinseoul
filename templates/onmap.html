{% extends 'base.html' %}
{% block title %}Map :: Now in Seoul{% endblock %}
{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/onmap.css') }}">
{% endblock %}
{% block content %}
<div class="nav p-2 border-bottom">
    <a href="/" class="nav-item"><i class="bi bi-chevron-left"></i> Main</a>
    <div class="bi bi-globe me-2" id="lang-select-icon">
        <select id="lang-select" class="opacity-0">
            <option value="en" id="en">EN</option>
            <option value="ja" id="ja">JA</option>
            <option value="ko" id="ko">KO</option>
        </select>
    </div>
</div>
</div>
<main>
    <div class="main-container">
        <div class="accordion" id="mapFilter">

            <div class="accordion-item">
                <h2 class="accordion-header">
                    <div class="accordion-button bg-white" type="button" id="filterDisplay">
                        Filter
                    </div>
                </h2>
                <div id="filterDiv" class="accordion-collapse collapse show" data-bs-parent="#mapFilter">
                    <form class="accordion-body" id="filterForm">
                        <div class="mb-3">
                            <p class="form-label">{{_ ('search-label') }}</p>
                            <div class="d-flex">
                                <input type="search" class="form-control me-3" id="mapSearch" name="mapSearch">
                                <button class="btn btn-primary" id="btnSearch"><i class="bi bi-search"></i></button>
                            </div>
                            <div class="toast align-items-center start-50 translate-middle text-bg-dark" role="alert" aria-live="assertive" aria-atomic="true" id="toast">
                                <div class="d-flex">
                                    <div class="toast-body" id="toastMsg"></div>
                                    <button type="button" class="btn-close me-2 m-auto btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <p class="form-label">{{ _('theme-label')}}</p>
                            <div class="flex-wrap" role="group" aria-label="Theme filter">
                                <input type="checkbox" class="mapfilter btn-check" id="food" name="theme" value="food">
                                <label class="btn btn-outline-primary btn-sm mb-1" for="food">#Food</label>

                                <input type="checkbox" class="mapfilter btn-check" id="drama" name="theme" value="drama">
                                <label class="btn btn-outline-primary btn-sm mb-1" for="drama">#Drama</label>

                                <input type="checkbox" class="mapfilter btn-check" id="beauty" name="theme" value="beauty">
                                <label class="btn btn-outline-primary btn-sm mb-1" for="beauty">#Beauty</label>

                                <input type="checkbox" class="mapfilter btn-check" id="movie" name="theme" value="movie">
                                <label class="btn btn-outline-primary btn-sm mb-1" for="movie">#Movie</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <p class="form-label">{{ _('crowd-level') }}</p>
                            <div class="flex-wrap" role="group" aria-label="Crowd density">
                                <input type="radio" class="mapfilter btn-check" name="crowd" id="density-all"
                                    value="all" checked>
                                <label class="btn btn-outline-primary btn-sm mb-1" for="density-all">{{ _('crowd-all') }}</label>

                                <input type="radio" class="mapfilter btn-check" name="crowd" id="density-low" value="Comfortable">
                                <label class="btn btn-outline-primary btn-sm mb-1" for="density-low">{{ _('crowd-comfortable') }}</label>

                                <input type="radio" class="mapfilter btn-check" name="crowd" id="density-medium" value="Moderate">
                                <label class="btn btn-outline-primary btn-sm mb-1" for="density-medium">{{ _('crowd-moderate') }}</label>

                                <input type="radio" class="mapfilter btn-check" name="crowd" id="density-slightly" value="Slightly crowded">
                                <label class="btn btn-outline-primary btn-sm mb-1" for="density-slightly">{{ _('crowd-slightlycrowded') }}</label>

                                <input type="radio" class="mapfilter btn-check" name="crowd" id="density-high" value="Crowded">
                                <label class="btn btn-outline-primary btn-sm mb-1" for="density-high">{{ _('crowd-crowded') }}</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <button class="btn btn-secondary" type="reset" id="btnReset">
                                <i class="bi bi-arrow-clockwise me-3"></i>Reset
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div id="map"></div>
    </div>
</main>
<script>
    const originMapData = {{ data | tojson | safe }};
</script>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
<script src="{{ url_for('static', filename='js/globalLocale.js') }}"></script>
<script src="{{ url_for('static', filename='js/translate.js') }}"></script>
<script src="{{ url_for('static', filename='js/marker.js') }}"></script>
<script src="{{ url_for('static', filename='js/filter.js') }}"></script>></script>
{% endblock %}